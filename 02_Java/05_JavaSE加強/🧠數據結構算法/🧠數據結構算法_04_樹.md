#ğŸ’»ç·¨ç¨‹/ğŸŒ Java/05_JavaSEåŠ å¼· 
# æ¨¹ Tree
- æœ‰å±¤æ¬¡é—œç³»
- å¸¸è¦‹è¡“èªï¼š
	- çµé»çš„åº¦ï¼šä¸€å€‹çµé»å«æœ‰çš„å­æ¨¹çš„æ•¸é‡
	- æ ¹çµé»ï¼šç„¡çˆ¶ç¯€é»çš„çµé»
	- è‘‰çµé»ï¼šåº¦ç‚º0çš„çµé»
	- çµé»çš„å±¤æ¬¡ï¼šå¾æ ¹çµé»é–‹å§‹ï¼Œæ ¹çµé»çš„å±¤æ¬¡ç‚º1ï¼Œæ ¹çš„ç›´å±¬å­çµé»ç‚º2ï¼Œä»¥æ­¤é¡æ¨â€¦
	- çµé»çš„å±¤åºç·¨è™Ÿï¼šå°‡æ¨¹ä¸­çµé»ï¼Œç”±ä¸Šå±¤åˆ°ä¸‹å±¤ã€åŒå±¤ç”±å·¦åˆ°å³æ’æˆç·šæ€§åºåˆ—
	- æ¨¹çš„åº¦ï¼šæ¨¹ä¸­æ‰€æœ‰çµé»çš„åº¦çš„æœ€å¤§å€¼
	- æ¨¹çš„é«˜åº¦ï¼šæ¨¹ä¸­çµé»çš„æœ€å¤§å±¤æ¬¡

![image](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Treedatastructure.png/300px-Treedatastructure.png)

# äºŒå‰æ¨¹ Binary tree
æ¯å€‹ç¯€é»æœ€å¤šåªæœ‰å…©å€‹åˆ†æ”¯
![image](https://i.iter01.com/images/8af979f68af40b98a26b37b1aa4325c1d77f6e1e289a48820d583795e97e518c.png)

## ğŸ§ äºŒå‰æŸ¥æ‰¾æ¨¹çµé»
|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|æ§‹é€ æ–¹æ³•|`T082_TreeNode(final K key, final V value)`|
|è®Šé‡|`public K key`æ¨¹ä»¥éµå€¼å°å„²å­˜</br>`public V value`</br>`public T082_TreeNode<K, V> leftNode`å·¦çµé»</br>`public T082_TreeNode<K, V> rightNode`å³çµé»|

```java
public class T082_TreeNode<K, V> {
    // ä»¥éµå€¼å°å„²å­˜
    public K key;
    public V value;
    // å·¦çµé»
    public T082_TreeNode<K, V> leftNode;
    // å³çµé»
    public T082_TreeNode<K, V> rightNode;
    private String printTab = "\t\t";

    public T082_TreeNode(final K key, final V value, final T082_TreeNode<K, V> leftNode, final T082_TreeNode<K, V> rightNode) {
        super();
        this.key = key;
        this.value = value;
        this.leftNode = leftNode;
        this.rightNode = rightNode;
    }
	
	// toString()çœç•¥
}
```

## ğŸ§ äºŒå‰æŸ¥æ‰¾æ¨¹
å·¦å­ç¯€é» < çˆ¶ç¯€é» < å³å­ç¯€é»
`T082_BinaryTree<K extends Comparable<K>, V>`

|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|æ§‹é€ æ–¹æ³•|`T082_BinaryTree()`|
|è®Šé‡|`private T082_TreeNode<K, V> rootNode`æ ¹çµé»</br>`private int lenght`æ¨¹ä¸­å…ƒç´ å€‹æ•¸|
|æ–¹æ³•|`void put(K key, V value)`å‘æ¨¹æ·»åŠ éµå€¼å°</br>`T082_TreeNode<K, V> put(T082_TreeNode<K, V> treeNode, K key, V value)`</br>å‘æŒ‡å®šæ¨¹ä¸Šæ·»åŠ éµå€¼å°ï¼Œè¿”å›æ·»åŠ å¾Œçš„æ–°æ¨¹</br>`V get(final K key)`ä¾éµæ‰¾å€¼</br>`V get(T082_TreeNode<K, V> treeNode, K key)`æŒ‰éµå‘æŒ‡å®šæ¨¹æ‰¾å€¼</br>`void delete(K key)`ä¾éµåˆªé™¤çµé»</br>`void delete(T082_TreeNode<K, V> treeNode, K key)`åˆªé™¤æŒ‡å®šæ¨¹ä¸­æŒ‡å®šéµçš„çµé»</br>`int getLen()`|

```java
public class T082_BinaryTree<K extends Comparable<K>, V> {
    // æ ¹çµé»
    private T082_TreeNode<K, V> rootNode;
    // æ¨¹ä¸­å…ƒç´ å€‹æ•¸
    private int lenght;
}
```

### æ·»åŠ çµé»é‚è¼¯
1. ç•¶å‰çµé» == nullï¼Œæ·»åŠ çµé»
2. æ–°çµé» < ç•¶å‰çµé»ï¼Œç¹¼çºŒæŸ¥æ‰¾ç•¶å‰çµé»çš„"å·¦"çµé»
3. æ–°çµé» == ç•¶å‰çµé»ï¼Œæ›¿æ›å€¼å³å¯
4. æ–°çµé» > ç•¶å‰çµé»ï¼Œç¹¼çºŒæŸ¥æ‰¾ç•¶å‰çµé»çš„"å³"çµé»

```java
public void put(final K key, final V value) {
	this.rootNode = this.put(this.rootNode, key, value);
	this.lenght++;
}

private T082_TreeNode<K, V> put(T082_TreeNode<K, V> treeNode, final K key, final V value) {
	// è‹¥æŒ‡å®šæ¨¹çš„æ ¹çµé»ç‚ºç©º
	if (treeNode == null || treeNode.key == null) {
		treeNode = new T082_TreeNode<K, V>(key, value, null, null);
		return treeNode;
	}
	// éµå¤§æ–¼çµé»ï¼Œæ”¾è‡³å³ç¯€é»
	if (key.compareTo(treeNode.key) > 0) {
		treeNode.rightNode = this.put(treeNode.rightNode, key, value);
	}
	// éµç­‰æ–¼çµé»ï¼Œæ›´æ–°å€¼
	else if (key.compareTo(treeNode.key) == 0) {
		treeNode.value = value;
		this.lenght--;
	}
	// éµå°æ–¼çµé»ï¼Œæ”¾è‡³å·¦ç¯€é»
	else {
		treeNode.leftNode = this.put(treeNode.leftNode, key, value);
	}
	return treeNode;
}
```

### æŸ¥æ‰¾çµé»é‚è¼¯
å’Œæ·»åŠ é¡ä¼¼

```java
public V get(final K key) {
	return this.get(this.rootNode, key);
}

private V get(final T082_TreeNode<K, V> treeNode, final K key) {
	V returnValue = null;
	if (treeNode == null || treeNode.key == null) {
		return returnValue;
	}
	// éµå¤§æ–¼çµé»ï¼Œè‡³å³ç¯€é»æ‰¾å€¼
	if (key.compareTo(treeNode.key) > 0) {
		returnValue = this.get(treeNode.rightNode, key);
	}
	// éµç­‰æ–¼çµé»ï¼Œè¿”å›å€¼
	else if (key.compareTo(treeNode.key) == 0) {
		returnValue = treeNode.value;
	}
	// éµå°æ–¼çµé»ï¼Œè‡³å·¦ç¯€é»æ‰¾å€¼
	else {
		returnValue = this.get(treeNode.leftNode, key);
	}
	return returnValue;
}
```

### åˆªé™¤çµé»é‚è¼¯
![image](https://img-blog.csdnimg.cn/20190330115253130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2U4OTEzNzc=,size_16,color_FFFFFF,t_70)

1. æ‰¾åˆ°æ›¿ä»£åˆªé™¤çµé»çš„çµé»
	- è‹¥æœ‰å³å­æ¨¹ï¼Œæ‰¾å³å­æ¨¹æœ€å°çµé»
	- è‹¥ç„¡å³å­æ¨¹ && æœ‰å·¦å­æ¨¹ï¼Œæ‰¾å·¦å­æ¨¹æœ€å¤§çµé»
	- è‹¥å·¦ã€å³å­æ¨¹éƒ½æ²’æœ‰ï¼Œç›´æ¥åˆªé™¤çµé»
2. è¦æ³¨æ„
	- è‹¥æœ€å°çµé»æœ‰å³å­æ¨¹ï¼Œéœ€è¦å°‡å³å­æ¨¹å…§å®¹å‘ä¸Šä¸€å±¤ç§»
	- åä¹‹è‹¥æœ€å¤§çµé»æœ‰å·¦å­æ¨¹ï¼Œä¹Ÿè¦ä¸Šç§»å·¦å­æ¨¹
3. åˆªé™¤çµé»ï¼Œä¸¦ç”¨æ›¿æ›çµé»æ›¿æ›

```java
public void delete(final K key) {
	this.rootNode = this.delete(this.rootNode, key);
}

/**
 * åˆªé™¤æŒ‡å®šæ¨¹ä¸­æŒ‡å®šéµçš„çµé»
 *
 * @param treeNode
 * @param key
 */
private T082_TreeNode<K, V> delete(T082_TreeNode<K, V> treeNode, final K key) {
	// è‹¥æŒ‡å®šç¯€é»ç‚ºç©ºï¼Œä¸åšè™•ç†
	if (treeNode == null || treeNode.key == null) {
		return null;
	}
	// æ‰¾åˆ°è¦åˆªé™¤çš„çµé»
	if (key.compareTo(treeNode.key) > 0) {
		treeNode.rightNode = this.delete(treeNode.rightNode, key);
	} else if (key.compareTo(treeNode.key) == 0) {
		// æ‰¾è¦æ›¿ä»£çš„çµé»
		T082_TreeNode<K, V> newTreeNode = null;
		// è‹¥æœ‰å·¦çµé»ï¼Œå‰‡å–å·¦çµé»çš„æœ€å¤§å€¼
		if (treeNode.leftNode != null) {
			newTreeNode = this.findAndReplaceMaxNode(treeNode.leftNode);
		}
		// è‹¥ç„¡å·¦çµé»ï¼Œå‰‡å–å³çµé»çš„æœ€å°å€¼
		else if (treeNode.rightNode != null) {
			newTreeNode = this.findAndReplaceMinNode(treeNode.leftNode);
		}
		// è‹¥æœ‰å·¦ã€å³çµé»å†æ›´æ–°
		if (newTreeNode != null) {
			newTreeNode.rightNode = treeNode.rightNode;
			newTreeNode.leftNode = treeNode.leftNode;
		}
		treeNode = newTreeNode;
		this.lenght--;
	} else {
		treeNode.leftNode = this.delete(treeNode.leftNode, key);
	}
	return treeNode;
}

/**
 * æ‰¾æŒ‡å®šæ¨¹ä¸­æœ€å¤§ç¯€é»ï¼Œä¸¦æ›¿æ›æˆæ ¹çµé»(çµ¦åˆªé™¤ç”¨)
 *
 * @param treeNode
 * @return
 */
private T082_TreeNode<K, V> findAndReplaceMaxNode(T082_TreeNode<K, V> treeNode) {
	// è‹¥å³çµé»ä¸ç‚ºç©ºï¼Œç¹¼çºŒæ‰¾
	if (treeNode.rightNode != null) {
		final T082_TreeNode<K, V> maxNode = this.findAndReplaceMaxNode(treeNode.rightNode);
		// æœ€å¤§å€¼çš„ä¸Šä¸€å±¤ç¯€é»ï¼Œå³çµé»ç‚ºæœ€å¤§ç¯€é»çš„å·¦ç¯€é»
		if (treeNode.rightNode.equals(maxNode)) {
			treeNode.rightNode = maxNode.leftNode;
		}
		// å°‡æœ€å¤§çµé»æŒ‡å®šç‚ºçˆ¶çµé»
		maxNode.rightNode = treeNode;
		treeNode = maxNode;
	}
	return treeNode;
}

/**
 * æ‰¾æŒ‡å®šæ¨¹ä¸­æœ€å°ç¯€é»ï¼Œä¸¦æ›¿æ›æˆæ ¹çµé»(çµ¦åˆªé™¤ç”¨)
 *
 * @param treeNode
 * @return
 */
private T082_TreeNode<K, V> findAndReplaceMinNode(T082_TreeNode<K, V> treeNode) {
	// è‹¥å·¦çµé»ä¸ç‚ºç©ºï¼Œç¹¼çºŒæ‰¾
	if (treeNode.rightNode != null) {
		final T082_TreeNode<K, V> minNode = this.findAndReplaceMinNode(treeNode.leftNode);
		// æœ€å°å€¼çš„ä¸Šä¸€å±¤ç¯€é»ï¼Œå·¦çµé»ç‚ºæœ€å°ç¯€é»çš„å³ç¯€é»
		if (treeNode.leftNode.equals(minNode)) {
			treeNode.leftNode = minNode.rightNode;
		}
		// å°‡æœ€å°çµé»æŒ‡å®šç‚ºçˆ¶çµé»
		minNode.leftNode = treeNode;
		treeNode = minNode;
	}
	return treeNode;
}
```

### æŸ¥æ‰¾æœ€å°éµ
|`T082_TreeNode<K, V> getMinNode()`|å–å¾—æ¨¹ä¸­æœ€å°ç¯€é»|
|---|---|
|`T082_TreeNode<K, V> getMinNode(T082_TreeNode<K, V> treeNode)`|å–å¾—æŒ‡å®šæ¨¹çš„æœ€å°ç¯€é»|

```java
/**
 * æ‰¾æŒ‡å®šæ¨¹ä¸­æœ€å°ç¯€é»ï¼Œä¸¦æ›¿æ›æˆæ ¹çµé»(çµ¦åˆªé™¤ç”¨)
 *
 * @param treeNode
 * @return
 */
private T082_TreeNode<K, V> findAndReplaceMinNode(T082_TreeNode<K, V> treeNode) {
	// è‹¥å·¦çµé»ä¸ç‚ºç©ºï¼Œç¹¼çºŒæ‰¾
	if (treeNode.rightNode != null) {
		final T082_TreeNode<K, V> minNode = this.findAndReplaceMinNode(treeNode.leftNode);
		// æœ€å°å€¼çš„ä¸Šä¸€å±¤ç¯€é»ï¼Œå·¦çµé»ç‚ºæœ€å°ç¯€é»çš„å³ç¯€é»
		if (treeNode.leftNode.equals(minNode)) {
			treeNode.leftNode = minNode.rightNode;
		}
		// å°‡æœ€å°çµé»æŒ‡å®šç‚ºçˆ¶çµé»
		minNode.leftNode = treeNode;
		treeNode = minNode;
	}
	return treeNode;
}

public T082_TreeNode<K, V> getMinNode() {
	return this.getMinNode(this.rootNode);
}

/**
 * å–å¾—æŒ‡å®šæ¨¹çš„æœ€å°ç¯€é»
 *
 * @param treeNode
 * @return
 */
private T082_TreeNode<K, V> getMinNode(T082_TreeNode<K, V> treeNode) {
	if (treeNode == null) {
		return null;
	}
	if (treeNode.leftNode != null) {
		treeNode = this.getMinNode(treeNode.leftNode);
	}
	return treeNode;
}

public T082_TreeNode<K, V> getMaxNode() {
	return this.getMaxNode(this.rootNode);
}
```

### æŸ¥æ‰¾æœ€å¤§éµ
|`T082_TreeNode<K, V> getMaxNode()`|å–å¾—æ¨¹ä¸­æœ€å¤§ç¯€é»|
|---|---|
|`T082_TreeNode<K, V> getMaxNode(T082_TreeNode<K, V> treeNode)`|å–å¾—æŒ‡å®šæ¨¹çš„æœ€å¤§ç¯€é»|

å’ŒæŸ¥æ‰¾æœ€å°éµé¡ä¼¼ï¼Œç­†è¨˜çœç•¥

### éæ­·
æŒ‰ç…§æœç´¢è·¯å¾‘é€²è¡Œéæ­·


```java
/**
 * å‰åºéæ­·
 *
 * @return
 */
public T072_Queue<K> preErgodic() {
	return this.preErgodic(this.rootNode);
}

/**
 * å°‡æŒ‡å®šæ¨¹åŸ·è¡Œå‰åºéæ­·
 * æ ¹ç¯€é»-->å·¦å­æ¨¹-->å³å­æ¨¹
 *
 * @param treeNode
 * @return
 */
private T072_Queue<K> preErgodic(final T082_TreeNode<K, V> treeNode) {
	final T072_Queue<K> returnQueue = new T072_Queue<K>();
	// æ ¹ç¯€é»
	// ç¯€é»éµç‚ºç©ºï¼Œä»£è¡¨ä¹Ÿæ²’æœ‰å·¦ã€å³å­æ¨¹
	if (treeNode.key == null) {
		return new T072_Queue<K>();
	}
	returnQueue.enqueue(treeNode.key);
	// å·¦å­æ¨¹
	final T072_Queue<K> leftQueue = (treeNode.leftNode != null) ? this.preErgodic(treeNode.leftNode) : new T072_Queue<K>();
	while (leftQueue.getLen() > 0) {
		returnQueue.enqueue(leftQueue.dequeue());
	}
	// å³å­æ¨¹
	final T072_Queue<K> rightQueue = (treeNode.rightNode != null) ? this.preErgodic(treeNode.rightNode) : new T072_Queue<K>();
	while (rightQueue.getLen() > 0) {
		returnQueue.enqueue(rightQueue.dequeue());
	}
	return returnQueue;
}
```

#### å‰åºéæ­·
æ ¹ç¯€é»-->å·¦å­æ¨¹-->å³å­æ¨¹

#### ä¸­åºéæ­·(é‡è¦)
å·¦å­æ¨¹-->æ ¹ç¯€é»-->å³å­æ¨¹
```
å’Œå‰åºéæ­·é¡ä¼¼
```

#### å¾Œåºéæ­·
å·¦å­æ¨¹-->å³å­æ¨¹-->æ ¹ç¯€é»
```
å’Œå‰åºéæ­·é¡ä¼¼
```

#### å±¤åºéæ­·
æ ¹ç¯€é»(ç¬¬ä¸€å±¤)-->ç¬¬äºŒå±¤-->â€¦â€¦-->ç¬¬Nå±¤
```java
/**
 * å±¤åºéæ­·
 *
 * @return
 */
public T072_Queue<K> layerErgodic() {
	return this.layerErgodic(this.rootNode);
}

/**
 * å±¤åºéæ­·
 * æ ¹ç¯€é»(ç¬¬ä¸€å±¤)-->ç¬¬äºŒå±¤-->â€¦â€¦â€¦-->ç¬¬nå±¤
 *
 * @param treeNode
 * @return
 */
private T072_Queue<K> layerErgodic(final T082_TreeNode<K, V> treeNode) {
	final T072_Queue<K> returnQueue = new T072_Queue<K>();
	final T072_Queue<T082_TreeNode<K, V>> tempQueue = new T072_Queue<T082_TreeNode<K, V>>();
	tempQueue.enqueue(treeNode);
	while (!tempQueue.isEmpty()) {
		final T082_TreeNode<K, V> findNode = tempQueue.dequeue();
		if (findNode.leftNode != null) {
			tempQueue.enqueue(findNode.leftNode);
		}
		if (findNode.rightNode != null) {
			tempQueue.enqueue(findNode.rightNode);
		}
		returnQueue.enqueue(findNode.key);
	}
	return returnQueue;
}
```

### æœ€å¤§æ·±åº¦å•é¡Œ
```java
/**
 * å–å¾—æ¨¹çš„æœ€å¤§æ·±åº¦
 *
 * @return
 */
public int getMaxDepth() {
	return this.getMaxDepth(this.rootNode);
}

/**
 * å–å¾—æŒ‡å®šæ¨¹çš„æœ€å¤§æ·±åº¦
 *
 * @param treeNode
 * @return
 */
private int getMaxDepth(final T082_TreeNode<K, V> treeNode) {
	if (treeNode == null) {
		return 0;
	}
	final int leftDepth = (treeNode.leftNode == null) ? 0 : this.getMaxDepth(treeNode.leftNode);
	final int rightDepth = (treeNode.rightNode == null) ? 0 : this.getMaxDepth(treeNode.rightNode);
	return (leftDepth >= rightDepth) ? leftDepth + 1 : rightDepth + 1;
}
```

### æŠ˜ç´™å•é¡Œ
- å•é¡Œæè¿°ï¼š
	![images](https://img-blog.csdnimg.cn/20200419110201685.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01vZWxpbW9l,size_16,color_FFFFFF,t_70)
- åˆ†æç‚ºç¨‹åºå•é¡Œï¼š
	- æ ¹ç¯€é»ç‚ºä¸‹ç¯€é»
	- æ‰€æœ‰ç¯€é»çš„å·¦å­ç¯€é»éƒ½ç‚ºä¸‹æŠ˜ç—•
	- æ‰€æœ‰ç¯€é»çš„å³å­ç¯€é»éƒ½ç‚ºä¸ŠæŠ˜ç—•
	- ä»¥ä¸­åºéæ­·æ‰“å°æŠ˜è¡°
	![images](https://img-blog.csdnimg.cn/2020041911024852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01vZWxpbW9l,size_16,color_FFFFFF,t_70)

```java
@Test
@DisplayName("äºŒå‰æ¨¹_æŠ˜ç´™å•é¡Œ")
public void testcase02() {
	// TODO æŠ˜ç´™æ¬¡æ•¸ï¼Œç›¸ç•¶æ–¼æ¨¹çš„æ·±åº¦
	final int num = 4;
	if (num <= 0) {
		System.out.println("è«‹è¼¸å…¥æ­£ç¢ºçš„æç´™æ¬¡æ•¸");
	}
	// ç¬¬ä¸€æ¬¡æŠ˜ç´™ï¼Œä¸€å®šç‚ºdown
	final T082_TreeNode<Integer, String> rootNode = new T082_TreeNode<Integer, String>(1, "down", null, null);
	final T072_Queue<T082_TreeNode<Integer, String>> depthQueue = new T072_Queue<T082_TreeNode<Integer, String>>();
	depthQueue.enqueue(rootNode);
	for (int i = 2; i <= num; i++) {
		// å–å¾—ä¸‹ä¸€å±¤çš„æ‰€æœ‰ç¯€é»
		final int queueLen = depthQueue.getLen();
		for (int j = 0; j < queueLen; j++) {
			final T082_TreeNode<Integer, String> node = depthQueue.dequeue();
			// å·¦å­ç¯€é»éƒ½ç‚ºdown
			final T082_TreeNode<Integer, String> leftNode = new T082_TreeNode<Integer, String>(i, "down", null, null);
			node.leftNode = leftNode;
			depthQueue.enqueue(leftNode);
			// å³å­ç¯€é»éƒ½ç‚ºup
			final T082_TreeNode<Integer, String> rightNode = new T082_TreeNode<Integer, String>(i, "up", null, null);
			node.rightNode = rightNode;
			depthQueue.enqueue(rightNode);
		}
	}
	// ä½¿ç”¨ä¸­åºéæ­·æ‰“å°æŠ˜ç—•é¡å‹
	final T072_Queue<T082_TreeNode<Integer, String>> midQueue = this.midErgodic(rootNode);
	while (midQueue.getLen() > 0) {
		final T082_TreeNode<Integer, String> node = midQueue.dequeue();
		System.out.println(node.printInfo());
	}
}

/**
 * ä¸­åºéæ­·
 * å·¦å­æ¨¹-->æ ¹ç¯€é»-->å³å­æ¨¹
 *
 * @param treeNode
 * @return
 */
private T072_Queue<T082_TreeNode<Integer, String>> midErgodic(final T082_TreeNode<Integer, String> treeNode) {
	final T072_Queue<T082_TreeNode<Integer, String>> returnQueue = new T072_Queue<T082_TreeNode<Integer, String>>();
	// éµç‚ºç©ºï¼Œè¡¨ç¤ºç„¡å·¦ã€å³å­æ¨¹
	if (treeNode == null) {
		return new T072_Queue<T082_TreeNode<Integer, String>>();
	}
	// å·¦å­æ¨¹
	final T072_Queue<T082_TreeNode<Integer, String>> leftQueue = (treeNode.leftNode != null) ? //
			this.midErgodic(treeNode.leftNode) : new T072_Queue<T082_TreeNode<Integer, String>>();
	while (leftQueue.getLen() > 0) {
		returnQueue.enqueue(leftQueue.dequeue());
	}
	// æ ¹ç¯€é»
	returnQueue.enqueue(treeNode);
	// å³å­æ¨¹
	final T072_Queue<T082_TreeNode<Integer, String>> rightQueue = (treeNode.rightNode != null) ? //
			this.midErgodic(treeNode.rightNode) : new T072_Queue<T082_TreeNode<Integer, String>>();
	while (rightQueue.getLen() > 0) {
		returnQueue.enqueue(rightQueue.dequeue());
	}
	return returnQueue;
}
```

## ğŸ§ å † Heap
- ç‰¹é»ï¼š
	1. å †ç‚ºå®Œå…¨äºŒå‰æ¨¹ï¼›é™¤æœ€å¾Œä¸€å±¤å¯ä»¥ä¸æ»¿å¤–ï¼Œå…¶ä»–æ¯ä¸€å±¤éƒ½éƒ½å¿…é ˆæ˜¯æ»¿çš„ï¼›è‹¥æœ€å¾Œä¸€å±¤ä¸æ˜¯æ»¿çš„ï¼Œå‰‡å¿…é ˆå·¦æ»¿å³ä¸æ»¿
		![å®Œå…¨äºŒå‰æ¨¹](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8bd9afc7d91410985bf46f34ddf3432~tplv-k3u1fbpfcp-zoom-1.image)
	2. é€šå¸¸è¡¨ç¾ç‚ºæ•¸çµ„
		- è‹¥ç¯€é»ç‚º`list[k]`ï¼Œå‰‡å­ç¯€é»ç‚º`list[2k]`å’Œ`list[2k+1]`
		![å †æ•¸çµ„](https://img-blog.csdn.net/20151113213424274)
	3. æ¯å€‹ç¯€é»éƒ½å¤§æ–¼ç­‰æ–¼å­ç¯€é»ï¼Œè€Œå­ç¯€é»é †åºç„¡è¦å®š

### æ·»åŠ ã€åˆªé™¤å…ƒç´ 
|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T097_Heap<T extends Comparable<T>>`|
|æ§‹é€ æ–¹æ³•|`public T097_Heap(int size)`|
|è®Šé‡|`private T[] elements`</br>`private int size`|
|æ–¹æ³•|`public T deleteMax()`åˆªé™¤å †ä¸­çš„æœ€å¤§å…ƒç´ ï¼Œä¸¦è¿”å›æ­¤å…ƒç´ </br>`public void insert(T element)`åœ¨å †ä¸­æ’å…¥å…ƒç´ </br>`private void swim(int index)`ä½¿ç”¨ä¸Šæµ®ç®—æ³•ï¼Œæ¯”çˆ¶ç¯€é»å¤§å‰‡å‘ä¸Šç§»</br>`private void sink(int index)`ä½¿ç”¨ä¸‹æ²‰ç®—æ³•ï¼Œæ¯”è¼ƒå¤§çš„å­ç¯€é»å°å‰‡ä¸‹ç§»</br>`private boolean isLess(int i, int j)`åˆ¤æ–·å…©å€‹ç´¢å¼•å€¼å¤§å°</br>`private void changeLocation(int i, int j)`äº¤æ›å…©å€‹ç´¢å¼•å€¼|

```java
public class T097_Heap<T extends Comparable<T>> {
	private T[] elements;
	private int size;

	/**
	 * å»ºç«‹æŒ‡å®šå®¹é‡çš„å †
	 */
	public T097_Heap(int size) {
		super();
		this.elements = (T[]) new Comparable[size];
		this.size = 0;
	}

	/**
	 * åˆªé™¤å †ä¸­çš„æœ€å¤§å…ƒç´ ï¼Œä¸¦è¿”å›æ­¤å…ƒç´ 
	 */
	public T deleteMax() {
		// å †ä¸­ç„¡å…ƒç´ ï¼Œä¸åŸ·è¡Œ
		if (size <= 0) {
			return null;
		}
		// äº¤æ›æ ¹ç¯€é»ã€æœ€å¾Œä¸€å€‹ç¯€é»
		this.changeLocation(0, size - 1);
		// åˆªé™¤æœ€å¾Œä¸€å€‹ç¯€é»
		T delElement = this.elements[size--];
		this.elements[size] = null;
		// å°‡ç¬¬ä¸€å€‹å…ƒç´ æ’åº(ä¸‹æ²‰ç®—æ³•)
		this.sink(0);
		return delElement;
	}

	/**
	 * åœ¨å †ä¸­æ’å…¥å…ƒç´ 
	 */
	public void insert(T element) {
		// å¢åŠ é•·åº¦
		if (this.elements.length <= size + 1) {
			T[] newElements = (T[]) new Comparable[this.elements.length * 2];
			for (int i = 0; i < this.elements.length; i++) {
				newElements[i] = this.elements[i];
			}
			this.elements = newElements;
		}
		// å°‡æ–°å…ƒç´ æ”¾è‡³æœ€å¾Œå†é€²è¡Œæ’åº(ä¸Šæµ®ç®—æ³•)
		this.elements[size] = element;
		this.swim(size++);
	}

	/**
	 * ä½¿ç”¨ä¸Šæµ®ç®—æ³•ï¼Œæ¯”çˆ¶ç¯€é»å¤§å‰‡å‘ä¸Šç§»
	 */
	private void swim(int index) {
        // ç´¢å¼•ç‚ºæ ¹ç¯€é»ä¸ç”¨æ¯”è¼ƒ
        if (index == 0) {
            return;
        }
        // ç´¢å¼•ç‚ºå·¦å­ç¯€é»
        if (index % 2 != 0) {
            final int supIndex = (index - 1) / 2;
            if (this.isLess(index, supIndex)) {
                this.changeLocation(index, supIndex);
                this.swin(supIndex);
            }
        }
        // ç´¢å¼•ç‚ºå³å­ç¯€é»
        else {
            final int supIndex = (index - 2) / 2;
            if (this.isLess(index, supIndex)) {
                this.changeLocation(index, supIndex);
                this.swin(supIndex);
            }
        }
	}

	/**
	 * ä½¿ç”¨ä¸‹æ²‰ç®—æ³•ï¼Œæ¯”è¼ƒå¤§çš„å­ç¯€é»å°å‰‡ä¸‹ç§»
	 */
	private void sink(int index) {
		int subIndex01 = index * 2 + 1;
		int subIndex02 = index * 2 + 2;
		// ç„¡å­ç¯€é»å¯ä»¥æ¯”è¼ƒ
		if (subIndex01 >= this.size) {
			return;
		}
		// è¼ƒå¤§å­ç¯€é»ç‚ºå·¦å­ç¯€é»ï¼Œä¸”å¤§æ–¼çˆ¶ç¯€é»
		if ((subIndex02 >= this.size || this.isLess(subIndex01, subIndex02)) && this.isLess(subIndex01, index)) {
			this.changeLocation(subIndex01, index);
			this.sink(subIndex01);
		}
		// è¼ƒå¤§å­ç¯€é»ç‚ºå³å­ç¯€é»ï¼Œä¸”å¤§æ–¼çˆ¶ç¯€é»
		else if (subIndex02 < this.size && (this.isLess(subIndex02, subIndex01) && this.isLess(subIndex02, index))) {
			this.changeLocation(subIndex02, index);
			this.sink(subIndex02);
		}
	}

	/**
	 * åˆ¤æ–·å…©å€‹ç´¢å¼•å€¼å¤§å°ï¼›trueï¼Œiçš„ç´¢å¼•å€¼è¼ƒå¤§ï¼›falseï¼Œå…©è€…ä¸€æ¨£å¤§æˆ–jçš„ç´¢å¼•å€¼è¼ƒå¤§
	 */
	private boolean isLess(int i, int j) {
		return this.elements[i].compareTo(this.elements[j]) > 0;
	}

	/**
	 * äº¤æ›å…©å€‹ç´¢å¼•å€¼
	 */
	private void changeLocation(int i, int j) {
		T temp = this.elements[i];
		this.elements[i] = this.elements[j];
		this.elements[j] = temp;
	}

	@Override
	public String toString() {
		return "T097_Heap [elements=" + Arrays.toString(elements) + ", size=" + size + "]";
	}
}
```

### æ’åº
- `Comparable[] createHaep(final Comparable[] source)`ï¼Œæ ¹æ“šæ•¸çµ„æ§‹é€ æˆå †
- `Comparable[] doSort(final Comparable[] source)`ï¼Œæ•¸çµ„ä»¥å°åˆ°å¤§æ’åº

```java
public class T102_HeapSort {
    /**
     * æ ¹æ“šæ•¸çµ„æ§‹é€ æˆå †
     */
    public static Comparable[] createHaep(final Comparable[] source) {
        if (source == null) {
            return null;
        }
        // å»ºç«‹å †æ•¸çµ„
        final Comparable[] returnHeap = Arrays.copyOf(source, source.length);
        // å°å †æ•¸çµ„å‰ä¸€åŠçš„å…ƒç´ é€²è¡Œä¸‹æ²‰æ’åº
        for (int heapIndex = returnHeap.length / 2; heapIndex >= 0; heapIndex--) {
            T102_HeapSort.sink(returnHeap, heapIndex, returnHeap.length - heapIndex - 1);
        }
        return returnHeap;
    }

    /**
     * æ•¸çµ„ä»¥å°åˆ°å¤§æ’åº
     */
    public static Comparable[] doSort(final Comparable[] source) {
        if (source == null) {
            return null;
        }
        // å»ºç«‹å †æ•¸çµ„
        final Comparable[] heap = T102_HeapSort.createHaep(source);
        for (int changeIndex = heap.length - 1; changeIndex > 0; changeIndex--) {
            // æœ€å¤§å€¼åŠæœ€å°å€¼ç´¢å¼•äº¤æ›
            T102_HeapSort.changeLocation(heap, 0, changeIndex);
            // å°‡ç´¢å¼•0çš„å…ƒç´ é€²è¡Œä¸‹æ²‰æ’åºï¼Œæ’åºèŒƒåœéœ€è·³éæœ€å¾Œç´¢å¼•
            T102_HeapSort.sink(heap, 0, changeIndex - 1);
        }
        return heap;
    }

    /**
     * å°‡æŒ‡å®šç´¢å¼•åœ¨æŒ‡å®šç¬µåœä¸­ä¸‹æ²‰æ’åº(å¤§-->å°)
     */
    private static void sink(final Comparable[] source, final int index, final int range) {
        final int subIndex01 = index * 2 + 1;
        final int subIndex02 = index * 2 + 2;
        // è¶…éæ¯”è¼ƒèŒƒåœ
        if (range <= 0 || index + range < subIndex01) {
            return;
        }
        // ç„¡å­ç¯€é»æ¯”è¼ƒ
        if (subIndex01 >= source.length) {
            return;
        }
        // è¼ƒå¤§å­ç¯€é»ç‚ºå·¦å­ç¯€é»ï¼Œä¸”å¤§æ–¼çˆ¶ç¯€é»
        if (subIndex02 >= source.length || index + range < subIndex02
                || (T102_HeapSort.isLess(source, subIndex01, subIndex02) && T102_HeapSort.isLess(source, subIndex01, index))) {
            T102_HeapSort.changeLocation(source, subIndex01, index);
            T102_HeapSort.sink(source, subIndex01, range - subIndex01);
        }
        // è¼ƒå¤§å­ç¯€é»ç‚ºå³å­ç¯€é»ï¼Œä¸”å¤§æ–¼çˆ¶ç¯€é»
        else if (T102_HeapSort.isLess(source, subIndex02, subIndex01) && T102_HeapSort.isLess(source, subIndex02, index)) {
            T102_HeapSort.changeLocation(source, subIndex02, index);
            T102_HeapSort.sink(source, subIndex02, range - subIndex02);
        }
    }

    /**
     * åˆ¤æ–·å…©å€‹ç´¢å¼•å€¼å¤§å°ï¼›trueï¼Œiçš„ç´¢å¼•å€¼è¼ƒå¤§ï¼›falseï¼Œå…©è€…ä¸€æ¨£å¤§æˆ–jçš„ç´¢å¼•å€¼è¼ƒå¤§
     */
    private static boolean isLess(final Comparable[] source, final int i, final int j) {
        return source[i].compareTo(source[j]) > 0;
    }

    /**
     * äº¤æ›å…©å€‹ç´¢å¼•å€¼
     */
    private static void changeLocation(final Comparable[] source, final int i, final int j) {
        final Comparable temp = source[i];
        source[i] = source[j];
        source[j] = temp;
    }
}
```

## ğŸ§ å„ªå…ˆéšŠåˆ— Priority Queue
[[ğŸ§ æ•¸æ“šçµæ§‹ç®—æ³•_02_ç·šæ€§è¡¨]]ä¸­çš„éšŠåˆ—åªèƒ½æ‹¿å‡ºæœ€å…ˆé€²å…¥éšŠåˆ—çš„å…ƒç´ ï¼Œå„ªå…ˆéšŠåˆ—å‰‡æ˜¯åŸºæ–¼å †çš„æ•¸æ“šçµæ§‹ï¼Œæ¯æ¬¡å–å‡ºçš„å…ƒç´ ä¸€å®šç‚ºéšŠåˆ—ä¸­å„ªå…ˆç´šæœ€å¤§å€¼(æˆ–æ˜¯æœ€å°å€¼)ã€‚

### æœ€å¤§å„ªå…ˆéšŠåˆ— Max Priority Queue
åšæ³•å’Œå¯¦ç¾å †å·®ä¸å¤šï¼š
- æ’å…¥å…ƒç´ å¾Œç”¨ä¸Šæµ®ç®—æ³•æ’åº
- å–å‡ºæœ€å¤§å…ƒç´ (æ ¹ç¯€é»)å¾Œç”¨æœ€å¾Œç´¢å¼•çš„å€¼è£œä¸Šï¼Œå†ç”¨ä¸‹æ²‰ç®—æ³•æ’åº

### æœ€å°å„ªå…ˆéšŠåˆ—  Min Priority Queue
å’Œæœ€å¤§å„ªå…ˆéšŠåˆ—å·®ä¸å¤šï¼š
- æœ€å°å€¼æ”¾åœ¨æ ¹å…ƒç´ 
- çˆ¶ç¯€é»å…ƒç´ ä¸€å®šå°æ–¼å­ç¯€é»å…ƒç´ 
- ä¸»è¦èª¿æ•´`isLess(int i, int j)`çš„åˆ¤æ–·

### ç´¢å¼•å„ªå…ˆéšŠåˆ— Index Min Priority Queue
æœ€å¤§/æœ€å°å„ªå…ˆéšŠåˆ—éƒ½åƒ…èƒ½å–å‡ºæœ€å¤§/æœ€å°å€¼é€²è¡Œä¿®æ”¹ï¼Œç„¡æ³•å–å¾—æŒ‡å®šç´¢å¼•çš„å€¼ï¼Œå› æ­¤ç´¢å¼•å„ªå…ˆéšŠåˆ—å°‡ç´¢å¼•éƒ½å°æ‡‰éµ(åœ¨éšŠåˆ—å­å„²çš„ä½ç½®)ã€‚

![image](https://img-blog.csdnimg.cn/20200510153114796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDY2MzY3NQ==,size_16,color_FFFFFF,t_70)

- å…§å®¹åˆ—è¡¨ï¼Œå…§å®¹ç´¢å¼•<-->å…§å®¹å…ƒç´ 
- éšŠåˆ—åˆ—è¡¨ï¼Œä»¥éšŠåˆ—çš„æ–¹å¼å°å…§å®¹æ’åºï¼ŒéšŠåˆ—ç´¢å¼•<-->å…§å®¹ç´¢å¼•
- éšŠåˆ—ç´¢å¼•åˆ—è¡¨ï¼Œç‚ºäº†æ–¹ä¾¿å¾å…§å®¹æ‰¾åˆ°éšŠåˆ—ç´¢å¼•ï¼Œå…§å®¹ç´¢å¼•<-->éšŠåˆ—ç´¢å¼•

```java
/**
 * æœ€å°ç´¢å¼•å„ªå…ˆéšŠåˆ—
 * (æœ€å¤§ç´¢å¼•å„ªå…ˆéšŠåˆ—çš„åšæ³•é¡ä¼¼)
 *
 * @param <T>
 */
public class T113_IndexMinPriorityQueue<T extends Comparable<T>> {
    // å…§å®¹åˆ—è¡¨ï¼Œå…§å®¹ç´¢å¼•<-->å…§å®¹å…ƒç´ 
    private T[] elements;
    // éšŠåˆ—åˆ—è¡¨ï¼Œä»¥éšŠåˆ—çš„æ–¹å¼å°å…§å®¹æ’åºï¼ŒéšŠåˆ—ç´¢å¼•<-->å…§å®¹ç´¢å¼•
    private int[] queueElements;
    // éšŠåˆ—ç´¢å¼•åˆ—è¡¨ï¼Œç‚ºäº†æ–¹ä¾¿å¾å…§å®¹æ‰¾åˆ°éšŠåˆ—ç´¢å¼•ï¼Œå…§å®¹ç´¢å¼•<-->éšŠåˆ—ç´¢å¼•
    private int[] queueIndexs;
    private int size;

    public T113_IndexMinPriorityQueue(final int size) {
        super();
        this.size = 0;
        this.elements = (T[]) new Comparable[size];
        this.queueElements = new int[size];
        this.queueIndexs = new int[size];
    }

    /**
     * å–å¾—æœ€å°å€¼
     *
     * @return
     */
    public T getElement() {
        // ç„¡å…ƒç´ å¯å–
        if (this.size == 0) {
            return null;
        }
        // å–å¾—è¿”å›å…ƒç´ ä¸¦æ¸…ç©º
        final T returnElement = this.elements[this.queueElements[0]];
        this.elements[this.queueElements[0]] = null;
        this.queueIndexs[this.queueElements[0]] = 0;
        this.queueElements[0] = 0;
        // å°‡æœ€å¾Œå…ƒç´ æ”¾è‡³æ ¹ç¯€é»ï¼Œä¸¦åŸ·è¡Œä¸‹æ²‰æ’åº
        this.size--;
        this.changeLocation(0, this.size);
        this.sink(0);
        return returnElement;
    }

    /**
     * å‘æŒ‡å®šç´¢å¼•æ’å…¥å…ƒç´ 
     *
     * @param index å…§å®¹ç´¢å¼•
     * @param element å…§å®¹å…ƒç´ 
     */
    public void insert(final int index, final T element) {
        // å…§å®¹åˆ—è¡¨çš„ç´¢å¼•å·²ç¶“æœ‰å€¼ï¼Œä¸å†æ’å…¥
        if (this.contains(index)) {
            return;
        }
        // å…§å®¹åˆ—è¡¨é•·åº¦ä¸å¤ ï¼Œå‰‡éœ€è¦æ“´å®¹
        if (index >= this.elements.length) {
            final T[] newElements = (T[]) new Comparable[index * 2];
            for (int i = 0; i < this.elements.length; i++) {
                newElements[i] = this.elements[i];
            }
            this.elements = newElements;
            // éšŠåˆ—ç´¢å¼•åˆ—è¡¨ä¹Ÿè¦ä¸€èµ·æ“´å®¹
            final int[] newQueueIndexs = new int[index * 2];
            for (int i = 0; i < this.queueIndexs.length; i++) {
                newQueueIndexs[i] = this.queueIndexs[i];
            }
            this.queueIndexs = newQueueIndexs;
        }
        // å°‡å…ƒç´ æ”¾è‡³å…§å®¹åˆ—è¡¨
        this.elements[index] = element;
        // éšŠåˆ—åˆ—è¡¨é•·åº¦ä¸å¤ ï¼Œå‰‡éœ€è¦æ“´å®¹
        if (this.queueElements.length < this.size + 1) {
            final int[] newQueueElements = new int[this.queueElements.length * 2];
            for (int i = 0; i < this.queueElements.length; i++) {
                newQueueElements[i] = this.queueElements[i];
            }
            this.queueElements = newQueueElements;
        }
        // å°‡å…§å®¹ç´¢å¼•æ”¾è‡³éšŠåˆ—åˆ—è¡¨æœ€å¾Œï¼Œä¸¦é€²è¡Œä¸Šæµ®æ’åº
        this.queueElements[this.size] = index;
        this.queueIndexs[index] = this.size;
        this.swim(this.size++);
    }

    /**
     * åˆ¤æ–·ç´¢å¼•å°æ‡‰å…ƒç´ æ˜¯å¦å­˜åœ¨
     *
     * @param index
     * @return
     */
    public boolean contains(final int index) {
        if (index >= this.elements.length) {
            return false;
        }
        return this.elements[index] != null;
    }

    /**
     * é‡å°æŒ‡å®šéšŠåˆ—ç´¢å¼•åŸ·è¡Œä¸Šæµ®æ’åº
     *
     * @param queueIndex
     */
    private void swim(final int queueIndex) {
        // æ ¹ç¯€é»ä¸éœ€æ¯”å°
        if (queueIndex == 0) {
            return;
        }
        // ç´¢å¼•ç‚ºå·¦å­ç¯€é»
        if (queueIndex % 2 != 0) {
            final int supIndex = (queueIndex - 1) / 2;
            if (this.isLess(queueIndex, supIndex)) {
                this.changeLocation(queueIndex, supIndex);
                this.swim(supIndex);
            }
        }
        // ç´¢å¼•ç‚ºå³å­ç¯€é»
        else {
            final int supIndex = (queueIndex - 2) / 2;
            if (this.isLess(queueIndex, supIndex)) {
                this.changeLocation(queueIndex, supIndex);
                this.swim(supIndex);
            }
        }
    }

    /**
     * é‡å°æŒ‡å®šéšŠåˆ—ç´¢å¼•åŸ·è¡Œä¸‹æ²‰æ’åº
     *
     * @param queueIndex
     */
    private void sink(final int queueIndex) {
        final int leftIndex = queueIndex * 2 + 1;
        final int rightIndex = queueIndex * 2 + 2;
        // ç„¡å·¦å­ç¯€é»
        if (leftIndex >= this.size) {
            return;
        }
        // å·¦å­ç¯€é»æ¯”å³å­ç¯€é»å¤§ æˆ– ç„¡å³å­ç¯€é»
        if ((rightIndex >= this.size || this.isLess(leftIndex, rightIndex)) && this.isLess(leftIndex, queueIndex)) {
            this.changeLocation(queueIndex, leftIndex);
            this.sink(leftIndex);
        }
        // å³å­ç¯€é»æ¯”å·¦å­ç¯€é»å¤§
        else if (rightIndex < this.size && this.isLess(rightIndex, leftIndex) && this.isLess(rightIndex, queueIndex)) {
            this.changeLocation(queueIndex, rightIndex);
            this.sink(rightIndex);
        }
    }

    /**
     * è‹¥jè¼ƒå¤§ç‚ºtrueï¼Œè‹¥iè¼ƒå¤§ç‚ºfalse
     *
     * @param i
     * @param j
     * @return
     */
    private boolean isLess(final int i, final int j) {
        return this.elements[this.queueElements[j]].compareTo(this.elements[this.queueElements[i]]) > 0;
    }

    /**
     * äº¤æ›å…ƒç´ ç´¢å¼•ä½ç½®
     *
     * @param i
     * @param j
     */
    private void changeLocation(final int i, final int j) {
        // äº¤æ›å…§å®¹ç´¢å¼•
        final int tempElement = this.queueElements[i];
        this.queueElements[i] = this.queueElements[j];
        this.queueElements[j] = tempElement;
        // äº¤æ›éšŠåˆ—ç´¢å¼•
        this.queueIndexs[this.queueElements[i]] = i;
        this.queueIndexs[this.queueElements[j]] = j;
    }

    @Override
    public String toString() {
        return "T113_IndexMinPriorityQueue [\n" //
                + "\telements=" + Arrays.toString(this.elements) + ", \n"//
                + "\tqueueElements=" + Arrays.toString(this.queueElements) + ", \n" //
                + "\tqueueIndexs=" + Arrays.toString(this.queueIndexs) + ", \n" //
                + "\tsize=" + this.size + "\n"//
                + "]";
    }
}
```

## ğŸ§ 2-3æŸ¥æ‰¾æ¨¹
ç‚ºäº†æŸ¥è©¢æ•ˆèƒ½ï¼Œè¦å°‡æ¨¹çš„å±¤ç´šé™ä½(è½‰ç‚ºå®ŒæˆäºŒå‰æ¨¹)ï¼Œå¾è€Œå¼•å…¥2-3æŸ¥æ‰¾æ¨¹çš„æ¦‚å¿µï¼Œå®ƒå«æœ‰2å€‹ã€3å€‹ç¯€é»ï¼Œç‚ºäº†ä½¿ä»»æ„ç©ºç¯€é»åˆ°æ ¹ç¯€é»çš„é•·åº¦æ˜¯ç›¸ç­‰çš„ã€‚é›–ç„¶å¯ä»¥ä¸ç”¨åœ¨ç¨‹å¼ä¸­å¯¦ç¾æ­¤é‚è¼¯ï¼Œä½†ç´…é»‘æ¨¹ã€Bæ¨¹ã€B+æ¨¹éƒ½æ˜¯åŸºæ–¼2-3æŸ¥æ‰¾æ¨¹çš„æ¦‚å¿µï¼ï¼
- [ä»€éº¼æ˜¯2-3æŸ¥æ‰¾æ¨¹ çŸ¥ä¹](https://zhuanlan.zhihu.com/p/92394224)
- [2-3æŸ¥æ‰¾æ¨¹æ’å…¥æµç¨‹è¬›è§£ bilibili](https://www.bilibili.com/video/BV1iJ411E7xW?p=121)

![image](https://pic4.zhimg.com/80/v2-b782a4f8712559d3a461da3fe891b58f_720w.jpg)

- 2-ç¯€é»ï¼šé‚è¼¯å’ŒäºŒå‰æ¨¹ä¸€æ¨£ï¼Œæ¯”çˆ¶ç¯€é»å°æ‰¾å·¦å­ç¯€é»ï¼Œæ¯”çˆ¶ç¯€é»å¤§æ‰¾å³å­ç¯€é»
- 3-ç¯€é»ï¼šçˆ¶ç¯€é»æœ‰å…©å€‹éµ
	- æ¯”å…©å€‹éµéƒ½å°ï¼Œæ‰¾å·¦å­ç¯€é»
	- ä»‹æ–¼å…©å€‹éµä¹‹é–“ï¼Œæ‰¾ä¸­é–“å­ç¯€é»
	- æ¯”å…©å€‹éµéƒ½å¤§ï¼Œæ‰¾å³å­ç¯€é»

## ğŸ§ ç´…é»‘æ¨¹ R-B Tree
- å®šç¾©ï¼šç´…é»‘æ¨¹æ˜¯åŸºæ–¼äºŒå‰æ¨¹å¯¦ç¾2-3æŸ¥æ‰¾æ¨¹ï¼Œä¹Ÿå°±æ˜¯èªªç”¨é»‘éˆçµã€ç´…éˆçµä¾†è¡¨ç¤º2-ç¯€é»ã€3-ç¯€é»
	- é»‘éˆçµï¼šä¸€å€‹æ™®é€šçš„äºŒå‰ç¯€é»
	- ç´…éˆçµï¼šå…©å€‹2-ç¯€é»çµ„æˆä¸€å€‹3-ç¯€é»
- ç‰¹é»ï¼š
	1. é‡­éˆçµéƒ½ç‚ºå·¦éˆæ¥
	2. ä¸€å€‹ç¯€é»æœ€å¤šåªèƒ½æœ‰ä¸€æ¢ç´…éˆçµ
	3. é»‘è‰²å¹³è¡¡ï¼Œå³ä»»æ„ç©ºéˆçµåˆ°æ ¹ç¯€é»è·¯å¾‘ç›¸åŒ

![image](https://hexo-rxy.oss-cn-beijing.aliyuncs.com/data_structure/RBTree/2-3%E6%A0%91%E4%B8%8E%E7%BA%A2%E9%BB%91%E6%A0%91-%E6%95%B4%E4%BD%93%E5%AF%B9%E6%AF%94.png)

|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T124_Node<Key, Value>`|
|æ§‹é€ æ–¹æ³•|`public T124_Node(Key key, Value value, Node subLeft, Node subRight, boolean color)`|
|æˆå“¡è®Šé‡|`public Node subLeft`ï¼Œå·¦å­ç¯€é»</br>`public Node subRight`ï¼Œå³å­ç¯€é»</br>`public Key key`</br>`public Value value`</br>`public boolean color`å…¶çˆ¶çµé»æŒ‡å‘å®ƒçš„éˆçµï¼Œfalseç‚ºé»‘ï¼Œtrueç‚ºç´…é¡è‰²|

### å¹³è¡¡åŒ–
- å¹³è¡¡åŒ–ï¼šç•¶ç´…é»‘æ¨¹é€²è¡Œå¢åˆªæ”¹æ“ä½œå¾Œï¼Œå¯èƒ½ä¸èƒ½æ»¿è¶³ç´…é»‘æ¨¹çš„ç‰¹é»ï¼Œæ‰€ä»¥éœ€è¦é€²è¡Œæ“ä½œ(å·¦æ—‹/å³æ—‹)ä¾†ä¿æŒæ¨¹çš„å¹³è¡¡
- å·¦æ—‹ï¼šç•¶ç¯€é»çš„å·¦å­ç¯€é»ç‚ºé»‘è‰²ã€å³å­ç¯€é»ç‚ºç´…è‰²ï¼Œå‰‡éœ€è¦å·¦æ—‹ã€‚
	![image](https://pic2.zhimg.com/80/v2-30474dff9eacac87d6694c14793ca171_720w.jpg)
- å³æ—‹ï¼šç•¶ç¯€é»çš„å·¦å­ç¯€é»ç‚ºç´…è‰²ï¼Œå·¦å­ç¯€é»çš„å·¦å­ç¯€é»ä¹Ÿç‚ºå·¦è‰²ï¼Œå‰‡éœ€è¦å³æ—‹ã€‚
	ä½†å³æ—‹å¾Œæœƒå‡ºç¾ç¯€é»çš„å·¦ã€å³å­ç¯€é»éƒ½ç‚ºç´…ï¼ŒåŒæ¨£ä¸æ»¿è¶³ç´…é»‘æ¨¹ç‰¹æ€§ï¼Œæ­¤æ™‚å³æ—‹ä¸è™•ç†ï¼Œå¦å¤–é‚„éœ€è¦é€²è¡Œé¡è‰²åè½‰ã€‚
	![image](https://pic4.zhimg.com/80/v2-c28bd346c5c793730e81ad9d68a74943_720w.jpg)
- é¡è‰²åè½‰ï¼šå·¦ç¯€é»çš„å·¦ã€å³å­ç¯€é»éƒ½ç‚ºç´…è‰²æ™‚ï¼Œå‰‡éœ€è¦é¡è‰²åè½‰ï¼›ç›¸ç•¶æ–¼æŸåˆ†4-ç¯€é»ã€‚
	![image](https://pic1.zhimg.com/80/v2-924e46534463feda7ec6b5086123c648_720w.jpg)

### å¯¦ç¾
|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T128_RedBlackTree<Key extends Comparable<Key>, Value>`|
|æ§‹é€ æ–¹æ³•|`T128_RedBlackTree()`|
|æˆå“¡è®Šé‡|`private T124_Node<Key, Value> rootNode`</br>`private int size`</br>`private static final boolean RED = true`ç´…è‰²éˆæ¥æ¨™è­˜ï¼Œå› ç‚ºNodeçš„colorå¯è®€æ€§ä¸é«˜</br>`private static final boolean BLACK = false`é»‘è‰²éˆæ¥æ¨™è­˜ï¼Œå› ç‚ºNodeçš„colorå¯è®€æ€§ä¸é«˜|
|æ–¹æ³•|`public void put(Key key, Value value)`åœ¨æ•´å€‹æ¨¹æ’å…¥å…ƒç´ </br>`private T124_Node<Key, Value> put(T124_Node<Key, Value> node, Key key, Value value)`åœ¨æŒ‡å®šæ¨¹æ’å…¥å…ƒç´ ï¼Œè¿”å›æ·»åŠ å®Œå…ƒç´ å¾Œçš„æ¨¹</br>`public Value get(Key key)`æ ¹æ“škeyæ‰¾å€¼</br>`private Value get(T124_Node<Key, Value>node, Key key)`åˆ¤æ–·çµé»çš„çˆ¶ç¯€é»æŒ‡å‘ç¯€é»æ˜¯å¦ç‚ºç´…éˆçµ|

```java
public class T128_RedBlackTree<Key extends Comparable<Key>, Value> {
    private T124_Node<Key, Value> rootNode;
    private int size;
    // ç´…è‰²éˆæ¥æ¨™è­˜ï¼Œå› ç‚ºNodeçš„colorå¯è®€æ€§ä¸é«˜
    private static final boolean RED = true;
    // é»‘è‰²éˆæ¥æ¨™è­˜ï¼Œå› ç‚ºNodeçš„colorå¯è®€æ€§ä¸é«˜
    private static final boolean BLACK = false;

    public T128_RedBlackTree() {
        super();
        this.size = 0;
    }

    /**
     * åœ¨æ•´å€‹æ¨¹æ’å…¥å…ƒç´ 
     *
     * @param key
     * @param value
     */
    public void put(final Key key, final Value value) {
        this.rootNode = this.put(this.rootNode, key, value);
        this.rootNode.color = BLACK;// æ ¹ç¯€é»ä¸€å®šç‚ºé»‘éˆçµ
    }

    /**
     * åœ¨æŒ‡å®šæ¨¹æ’å…¥å…ƒç´ 
     *
     * @return æ·»åŠ å®Œå…ƒç´ å¾Œçš„æ¨¹
     */
    private T124_Node<Key, Value> put(T124_Node<Key, Value> node, final Key key, final Value value) {
        // è‹¥ç¯€é»ç‚ºç©ºï¼Œç›´æ‹‰è¿”å›ç´…éˆçµçš„ç¯€é»
        if (node == null) {
            this.size++;
            return new T124_Node(key, value, null, null, RED);
        }
        final int condition = key.compareTo(node.key);
        // keyå’Œç¯€é»ç›¸ç­‰ï¼Œæ›¿æ›valueå³å¯
        if (condition == 0) {
            node.value = value;
        }
        // keyæ¯”è¼ƒå°ï¼Œæ‰¾å·¦å­ç¯€é»
        else if (condition < 0) {
            node.subLeftNode = this.put(node.subLeftNode, key, value);
        }
        // keyæ¯”è¼ƒå¤§ï¼Œæ‰¾å³å­ç¯€é»
        else if (condition > 0) {
            node.subRightNode = this.put(node.subRightNode, key, value);
        }
        // è‹¥å·¦å­ç¯€é»ç‚ºé»‘éˆçµã€å³å­ç¯€é»ç‚ºç´…éˆçµï¼ŒåŸ·è¡Œå·¦æ—‹
        if (this.isRed(node.subRightNode)) {
            node = this.rotateLeft(node);
        }
        // è‹¥å·¦å­ç¯€é»ç‚ºç´…éˆçµï¼Œä¸”å·¦å­ç¯€é»çš„å·¦å­ç¯€é»ä¹Ÿç‚ºå·¦éˆçµï¼ŒåŸ·è¡Œå³æ—‹
        if (this.isRed(node.subLeftNode) //&& this.isBlack(node.subRightNode)
                && this.isRed(node.subLeftNode.subLeftNode)) {
            node = this.rotateRight(node);
        }
        // è‹¥å·¦ã€å³å­ç¯€é»ç‚ºç´…éˆçµï¼ŒåŸ·è¡Œé¡è‰²åè½‰
        if (this.isRed(node.subLeftNode) && this.isRed(node.subRightNode)) {
            node = this.flipColor(node);
        }
        return node;
    }

    /**
     * æ ¹æ“škeyæ‰¾å€¼
     *
     * @param key
     * @return
     */
    public Value get(final Key key) {
        return this.get(this.rootNode, key);
    }

    /**
     * åœ¨æŒ‡å®šæ¨¹ï¼Œæ ¹æ“škeyæ‰¾å€¼ï¼ŒæŸ¥æ‰¾æ–¹å¼å’ŒäºŒå‰æ¨¹ä¸€æ¨£
     *
     * @param node
     * @param key
     * @return
     */
    private Value get(final T124_Node<Key, Value> node, final Key key) {
        if (node == null) {
            return null;
        }
        final int condition = node.key.compareTo(key);
        if (condition < 0) {
            return this.get(node.subRightNode, key);
        } else if (condition > 0) {
            return this.get(node.subLeftNode, key);
        } else {
            return node.value;
        }
    }

    /**
     * å·¦æ—‹
     *
     * @param node ä¸ç¬¦åˆç´…é»‘æ¨¹ç‰¹æ€§çš„ç¯€é»
     * @return
     */
    private T124_Node<Key, Value> rotateLeft(final T124_Node<Key, Value> node) {
        final T124_Node<Key, Value> newSupNode = node.subRightNode;
        node.subRightNode = newSupNode.subLeftNode;
        node.color = newSupNode.color;
        newSupNode.subLeftNode = node;
        newSupNode.color = BLACK;
        return newSupNode;
    }

    /**
     * å³æ—‹
     *
     * @param node
     * @return
     */
    private T124_Node<Key, Value> rotateRight(final T124_Node<Key, Value> node) {
        final T124_Node<Key, Value> newSubNode = node.subLeftNode;
        node.subLeftNode = newSubNode.subRightNode;
        node.color = newSubNode.color;
        newSubNode.subRightNode = node;
        newSubNode.color = BLACK;
        return newSubNode;
    }

    /**
     * é¡è‰²åè½‰ï¼Œæ‹†åˆ†4-ç¯€é»
     *
     * @param node
     * @return
     */
    private T124_Node<Key, Value> flipColor(final T124_Node<Key, Value> node) {
        node.color = !node.color;
        node.subLeftNode.color = !node.subLeftNode.color;
        node.subRightNode.color = !node.subRightNode.color;
        return node;
    }

    /**
     * åˆ¤æ–·çµé»çš„çˆ¶ç¯€é»æŒ‡å‘ç¯€é»æ˜¯å¦ç‚ºç´…éˆçµ
     *
     * @param node
     * @return
     */
    private boolean isRed(final T124_Node<Key, Value> node) {
        if (node == null) {
            return false;
        }
        return node.color == RED;
    }

    private boolean isBlack(final T124_Node<Key, Value> node) {
        if (node == null) {
            return false;
        }
        return node.color == BLACK;
    }

    @Override
    public String toString() {
        return "T128_RedBlackTree [rootNode=" + this.rootNode + ", size=" + this.size + "]";
    }
}
```

# å¤šå‰æ¨¹ Multiway Trees
## ğŸ§ Bæ¨¹
Bæ¨¹ä¸­ç¯€é»å¯ä»¥åŒ…å«å¤šå€‹keyï¼Œå…·é«”æœ‰å¹¾å€‹keyä¸»è¦çœ‹å…·é«”çš„å¯¦ç¾ï¼Œå› æ­¤åœ¨å¯¦ç¾Bæ¨¹æ™‚å¿…é ˆæŒ‡å®šåƒæ•¸Mä¾†ç¢ºå®šBæ¨¹æ‰€å«çš„keyï¼Œå¯ä»¥ç¨±ä½œMéšçš„Bæ¨¹ã€‚

![image](https://img-blog.csdn.net/20160202204827368)

- ç‰¹é»ï¼š
	1. æ¯å€‹ç¯€é»æœ€å¤šæœ‰M-1å€‹keyï¼Œä¸¦ä»¥å‡åºæ’åˆ—
	2. æœ€å€‹ç¯€é»æœ€å¤šæœ‰Må€‹å­çµé»
	3. æ ¹ç¯€é»è‡³å°‘æœ‰å…©å€‹å­çµé»(é€™æ¨£æ‰å¹³è¡¡)
- å¢åˆªæ“ä½œåŸç†ï¼š[Bæ¨¹çš„æ’å…¥å’Œåˆªé™¤æ­¥é©†](https://www.cnblogs.com/nullzx/p/8729425.html)
- [Bæ¨¹åœ¨ç£ç›¤è®€å¯«çš„æ‡‰ç”¨](https://www.bilibili.com/video/BV1iJ411E7xW?p=133)

## ğŸ§ B+æ¨¹
![image](https://img-blog.csdn.net/20160202205105560)

- B+æ¨¹ç‚ºBæ¨¹çš„ä¸€ç¨®è®Šå½¢ï¼Œå·®ç•°ï¼š
	1. B+æ¨¹å­˜åœ¨éè‘‰çµé»ï¼Œéè‘‰çµé»åƒ…å…·æœ‰ç´¢å¼•ä½œç”¨ï¼Œåªå­˜keyä¸å­˜value
	2. B+æ¨¹çš„è‘‰ç¯€é»æ˜¯ä»¥æœ‰åºéˆè¡¨çµ„æˆ(å¯åƒè€ƒï¼š[[ğŸ§ æ•¸æ“šçµæ§‹ç®—æ³•_02_ç·šæ€§è¡¨]])ï¼Œæ–¹ä¾¿éæ­·
- B+æ¨¹æ“ä½œæ•¸æ“šåŸç†ï¼š[ B+æ¨¹æ’å…¥](https://www.bilibili.com/video/BV1iJ411E7xW?p=134)
- [B+æ¨¹åœ¨æ•¸æ“šåº«çš„æ‡‰ç”¨](https://www.bilibili.com/video/BV1iJ411E7xW?p=135)

## ğŸ§ å¹¶æŸ¥é›† Union Find
- åˆå¹¶ã€æŸ¥è©¢çš„é›†åˆï¼Œå¯ä»¥é«˜æ•ˆåŸ·è¡Œï¼š
	1. æŸ¥è©¢å…©å…ƒç´ æ˜¯å¦åœ¨åŒä¸€çµ„
	2. åˆå¹¶å…©å…ƒç´ ä½œåœ¨çš„çµ„
- ç‰¹é»
	1. æ¯å€‹å…ƒç´ å°æ‡‰ä¸€å€‹ç¯€é»
	2. æ¯çµ„æ•¸æ“šéƒ½ç‚ºä¸€é¡†æ¨¹
	3. å…©çµ„æ•¸æ“šé–“ç„¡ä»»ä½•é—œç³»
	4. åŒçµ„å…§ç¯€é»çš„çˆ¶å­é—œç³»ç„¡è¦æ±‚

![[æ•¸æ“šçµæ§‹ç®—æ³•_04_æ¨¹_01_å¹¶æŸ¥é›†.png]]

### åŸºæœ¬å¯¦ç¾
|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T137_UnionFind`|
|æ§‹é€ æ–¹æ³•|`T137_UnionFind(int size)`|
|æˆå“¡è®Šé‡|`private int[] eleAndGroup`è¨˜éŒ„ç¯€é»å…ƒç´ å’Œè©²å…ƒç´ æ‰€åœ¨åˆ†çµ„çš„æ¨™è­˜ç¬¦</br>`private int groupCount`æ•¸çµ„çš„åˆ†çµ„å€‹æ•¸|
|æ–¹æ³•|`public int getGroupCount()`å–å¾—åˆ†çµ„å€‹æ•¸</br>`public boolean connected(int element1, int element2)`åˆ¤æ–·å…©å…ƒç´ æ˜¯å¦å­˜åœ¨åŒä¸€çµ„ä¸­</br>`public int find(int element)`å–å¾—å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„æ¨™è­˜ç¬¦</br>`public void doUnion(int element1, int element2)`åˆå¹¶å…©å€‹å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„|

```java
public class T137_UnionFind {
    // è¨˜éŒ„ç¯€é»å…ƒç´ å’Œè©²å…ƒç´ æ‰€åœ¨åˆ†çµ„çš„æ¨™è­˜ç¬¦
    private int[] eleAndGroup;
    // æ•¸çµ„çš„åˆ†çµ„å€‹æ•¸
    private int groupCount;

    public T137_UnionFind(int size) {
        super();
        // åˆå§‹æƒ…æ³ä¸‹ï¼Œæ¯å€‹å…ƒç´ éƒ½åœ¨ç¨ç«‹çš„åˆ†çµ„ä¸­ï¼Œæ‰€ä»¥æ•¸çµ„åˆ†ç‚ºsizeå€‹çµ„
        this.groupCount = size;
        // åˆå§‹åŒ–eleAndGroupï¼Œå»ºç«‹é•·åº¦ç‚ºsize
        this.eleAndGroup = new int[size];
        // å°‡æ¯å€‹å…ƒç´ ä½œç‚ºåˆ†çµ„æ¨™è­˜ç¬¦ï¼Œä¸¦å°‡å…ƒç´ éƒ½ä½œç‚ºæ¯å€‹çµ„çš„æ ¹ç¯€é»
        for (int i = 0; i < this.eleAndGroup.length; i++) {
            this.eleAndGroup[i] = i;
        }
    }

    /**
     * å–å¾—åˆ†çµ„å€‹æ•¸
     * 
     * @return
     */
    public int getGroupCount() {
        return this.groupCount;
    }

    /**
     * åˆ¤æ–·å…©å…ƒç´ æ˜¯å¦å­˜åœ¨åŒä¸€çµ„ä¸­
     * 
     * @param element1
     * @param element2
     * @return
     */
    public boolean connected(int element1, int element2) {
        // å¦‚æœå…©å…ƒç´ çš„åˆ†çµ„æ¨™è­˜ç¬¦ç›¸åŒï¼Œä»£è¡¨åœ¨åŒä¸€çµ„
        return this.find(element1) == this.find(element2);
    }

    /**
     * å–å¾—å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„æ¨™è­˜ç¬¦
     * 
     * @param element
     * @return
     */
    public int find(int element) {
        return this.eleAndGroup[element];
    }

    /**
     * åˆå¹¶å…©å€‹å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„
     * 
     * @param element1
     * @param element2
     */
    public void doUnion(int element1, int element2) {
        // å…©å…ƒç´ è‹¥åœ¨åŒä¸€åˆ†çµ„ï¼Œç›´æ¥è¿”å›
        if (this.connected(element1, element2)) {
            return;
        }
        // å°‡element1çš„çµ„æ¨™è­˜ç¬¦æ”¹ç‚ºå’Œelement2ä¸€è‡´
        int elementGroup1 = this.find(element1);
        int elementGroup2 = this.find(element2);
        for (int i = 0; i < this.eleAndGroup.length; i++) {
            if (this.eleAndGroup[i] == elementGroup1) {
                this.eleAndGroup[i] = elementGroup2;
            }
        }
        // æ›´æ–°åˆ†çµ„å€‹æ•¸
        this.groupCount--;
    }
}
```

### å„ªåŒ–-ä½¿ç”¨æ¨¹çš„æ¦‚å¿µ
ä¸»è¦å„ªåŒ–findå’ŒdoUnionæ–¹æ³•ï¼ŒdoUnionå¾O(n)è®Šç‚ºO(1)ï¼Œä½†findéƒ¤å¾O(1)è®Šç‚ºO(n)

|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T139_UnionFindTree`|
|æ§‹é€ æ–¹æ³•|`T139_UnionFindTree(int size)`|
|æˆå“¡è®Šé‡|`private int[] eleAndGroup`==è¨˜éŒ„ç¯€é»å…ƒç´ èˆ‡å…¶çˆ¶ç¯€é»==</br>`private int groupCount`æ•¸çµ„çš„åˆ†çµ„å€‹æ•¸|
|æ–¹æ³•|`public int getGroupCount()`å–å¾—åˆ†çµ„å€‹æ•¸</br>`public boolean connected(int element1, int element2)`åˆ¤æ–·å…©å…ƒç´ æ˜¯å¦å­˜åœ¨åŒä¸€çµ„ä¸­</br>`public int find(int element)`å–å¾—å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„æ¨™è­˜ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ‰¾æ ¹ç¯€é»</br>`public void doUnion(int element1, int element2)`åˆå¹¶å…©å€‹å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„|

![image](https://www.runoob.com/wp-content/uploads/2020/10/rank-01.png)

```java
/**
 * å–å¾—å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„æ¨™è­˜ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ‰¾æ ¹ç¯€é»
 * 
 * @param element
 * @return
 */
public int find(int element) {
	int returnElement = -1;
	// å…ƒç´ å¤§æ–¼åˆ†çµ„æ¨™è­˜ç¬¦æ•¸çµ„é•·åº¦
	if (element >= this.eleAndGroup.length) {
		return returnElement;
	}
	returnElement = element;
	while (true) {
		int supElement = this.eleAndGroup[returnElement];
		// è‡ªå·±ç‚ºè‡ªå·±çš„çˆ¶ç¯€é»ï¼Œè¡¨ç¤ºæ­¤ç¯€é»ç‚ºæ ¹ç¯€é»
		if (supElement == returnElement) {
			break;
		}
		// é‚„æœ‰çˆ¶ç¯€é»ï¼Œå‰‡ç¹¼çºŒæ‰¾
		else {
			returnElement = supElement;
		}
	}
	return returnElement;
}

/**
 * åˆå¹¶å…©å€‹å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„
 * 
 * @param element1
 * @param element2
 */
public void doUnion(int element1, int element2) {
	// å…©å…ƒç´ è‹¥åœ¨åŒä¸€åˆ†çµ„ï¼Œç›´æ¥è¿”å›
	if (this.connected(element1, element2)) {
		return;
	}
	// å°‡element1çš„çˆ¶ç¯€é»æ”¹ç‚ºå’Œelement2ä¸€è‡´
	this.eleAndGroup[element1] = element2;
	// æ›´æ–°åˆ†çµ„å€‹æ•¸
	this.groupCount--;
}
```

### å„ªåŒ–-è·¯å¾‘å£“ç¸®
åŸ·è¡Œå…©çµ„åˆå¹¶(doUnion)æ™‚æ˜¯ç²—æš´åœ°å°‡å…©çµ„åˆå¹¶ï¼Œæ‡‰å…ˆåˆ¤æ–·å…©çµ„çš„å¤§å°ï¼Œå†å°‡å°çµ„å¹¶åˆ°å¤§çµ„ä¸­ï¼Œé€™æ¨£å¯ä»¥å£“ç¸®æ¨¹çš„è·¯å¾‘ã€‚

|è®Šé‡/æ–¹æ³•|APIè¨­è¨ˆ|
|---|---|
|é¡|`T140_UnionFindTreePathless`|
|æ§‹é€ æ–¹æ³•|`T140_UnionFindTreePathless(int size)`|
|æˆå“¡è®Šé‡|`private int[] eleAndGroup`è¨˜éŒ„ç¯€é»å…ƒç´ èˆ‡å…¶çˆ¶ç¯€é»</br>`private int[] eleSubSize`==è¨˜éŒ„ç¯€é»å°æ‡‰æ¨¹çš„ç¯€é»æ•¸==</br>`private int groupCount`æ•¸çµ„çš„åˆ†çµ„å€‹æ•¸|
|æ–¹æ³•|`public int getGroupCount()`å–å¾—åˆ†çµ„å€‹æ•¸</br>`public boolean connected(int element1, int element2)`åˆ¤æ–·å…©å…ƒç´ æ˜¯å¦å­˜åœ¨åŒä¸€çµ„ä¸­</br>`public int find(int element)`å–å¾—å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„æ¨™è­˜ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ‰¾æ ¹ç¯€é»</br>`public void doUnion(int element1, int element2)`åˆå¹¶å…©å€‹å…ƒç´ æ‰€åœ¨çš„åˆ†çµ„ï¼Œ==è¼ƒå°çµ„åˆå¹¶è‡³è¼ƒå¤§çµ„==|

```java
/**
 * åˆå¹¶å…©å…ƒç´ çš„çµ„ï¼Œè¼ƒå°çµ„åˆå¹¶è‡³è¼ƒå¤§çµ„
 *
 * @param element1
 * @param element2
 */
public void doUnion(final int element1, final int element2) {
	// å…©å…ƒç´ è‹¥åœ¨åŒä¸€åˆ†çµ„ï¼Œç›´æ¥è¿”å›
	if (this.connected(element1, element2)) {
		return;
	}
	// å–å¾—å…©å…ƒç´ æ ¹ç¯€é»åŠå…¶å°æ‡‰çš„ç¯€é»æ•¸
	int rootBigger = this.find(element2);// é»˜èªå…ƒç´ 2ç‚ºè¼ƒå¤§çµ„
	int rootSmaller = this.find(element1);
	final int elementRootSize1 = this.eleSubSize[rootBigger];
	final int elementRootSize2 = this.eleSubSize[rootSmaller];
	// å¦‚æœå…ƒç´ 1çš„æ ¹ç¯€é»ç‚ºè¼ƒå¤§çµ„ï¼Œå‰‡äº¤æ›
	if (elementRootSize1 < elementRootSize2) {
		final int temp = rootBigger;
		rootBigger = rootSmaller;
		rootSmaller = temp;
	}
	// è¼ƒå°‘çµ„å¹¶å…¥è¼ƒå¤§çµ„
	this.eleAndGroup[rootSmaller] = rootBigger;
	// æ›´æ–°è¼ƒå¤§çµ„å°æ‡‰çš„æ¨¹ç¯€é»æ•¸
	this.eleSubSize[rootBigger] += this.eleSubSize[rootSmaller];
	// æ›´æ–°è¼ƒå¤§çµ„æ ¹ç¯€é»çš„æ¨¹ç¯€é»æ•¸
	if (rootBigger != this.find(rootBigger)) {
		this.eleSubSize[this.find(rootBigger)] += this.eleSubSize[rootSmaller];
	}
	// æ›´æ–°åˆ†çµ„å€‹æ•¸
	this.groupCount--;
}
```


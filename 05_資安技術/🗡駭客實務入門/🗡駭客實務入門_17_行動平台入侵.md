# é§­å®¢å¯¦å‹™å…¥é–€_17_è¡Œå‹•å¹³å°å…¥ä¾µ
æ‰‹æ©Ÿæ»²é€æ¸¬è©¦Labï¼š[mobile lab](https://rewanthtammana.com/damn-vulnerable-bank/footprinting/index.html)

## ğŸ—¡è¡Œå‹•å¹³å°å…¥ä¾µæ–¹å¼ Mobile Platform Intrusion
![[é§­å®¢å¯¦å‹™å…¥é–€_17_è¡Œå‹•å¹³å°å…¥ä¾µ_01_è¡Œå‹•å¹³å°å…¥ä¾µæ–¹å¼.png]]

### OWASP Top 10 Mobile Threats
- Improper Platform Usageï¼Œç³»çµ±å¹³è‡ºä½¿ç”¨ä¸ç•¶
- Insecure Data Storageï¼Œä¸å®‰å…¨çš„è³‡æ–™å„²å­˜
- Insecure Communicationï¼Œä¸å®‰å…¨çš„é€šè¨Šæ–¹å¼
- Insecure Authenticationï¼Œä¸å®‰å…¨çš„èº«ä»½é©—è­‰
- Insufficient Cryptographyï¼ŒåŠ å¯†æ–¹å¼ä¸è¶³
- Insecure Authorizationï¼Œä¸å®‰å…¨çš„æˆæ¬Š
- Client Code Qualityï¼Œä½¿ç”¨è€…ç«¯ç¨‹å¼ç¢¼å“è³ªå•é¡Œ
- Code Tamperingï¼ŒAPP åŸå§‹ç¢¼ç«„æ”¹
- ==Reverse Engineeringï¼Œé€†å‘å·¥ç¨‹==
- Extraneous Functionalityï¼ŒAPPæ˜¯å¦åŒ…å«é¡å¤–åŠŸèƒ½

### APKé€†å‘å·¥ç¨‹
`unzip application.apk -d application`ï¼Œè§£å£“ç¸®apkæª”æœƒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

- AndroidManifest.xmlï¼Œå°ˆæ¡ˆåç¨±ã€ç‰ˆæœ¬ã€Androidç‰ˆæœ¬è³‡è¨Šã€æ¬Šé™èˆ‡æ‰€ä½¿ç”¨åˆ°çš„é¡åˆ¥
- /assets/
- /res/
- /resources.arsc
- ==/classes.dex==ï¼Œé€™äº›æª”æ¡ˆæœƒåœ¨Android Dalvik Virtual MachineåŸ·è¡Œclasses.dexæ˜¯apkçš„æ ¸å¿ƒæª”æ¡ˆï¼Œå¯ä»¥é€ç”±dex2jaré‚„åŸå‡ºjavaæª”
- /libs/ï¼Œå‰¯æª”åç‚º.soçš„linuxå‡½å¼åº«
- /META-INF/
	1. MANIFEST.MF æ‰€æœ‰æª”æ¡ˆçš„é›œæ¹Š
	2. CERT.SF æ‰€æœ‰æª”æ¡ˆçš„æ•¸ä½ç°½ç« 
	3. CERT.RSA é–‹ç™¼è€…çš„å…¬é‘°

### APPæ”»æ“Šé€”å¾‘
- ç€è¦½å™¨(browser)ï¼ŒPhishing
- æ‰‹æ©Ÿ/SMSï¼ŒSMS-phishing(ç°¡è¨Šé‡£é­š)
	- SS7(é€šè¨Šå”è­°ç¬¬ä¸ƒè™Ÿç™¼ä¿¡ç³»çµ±)å¼±é»ï¼šæ”»æ“Šè€…é€šéè³¼è²·æœå‹™çš„æ–¹å¼æ¥å…¥å¯åˆ©ç”¨SS7å”è­°æ¼æ´çš„é›»ä¿¡æ”¶ç™¼ç³»çµ±å¹³å°ï¼Œå¾è€Œå°‡ç™¼é€è‡³å—å®³è€…æ‰‹æ©Ÿè™Ÿç¢¼çš„ç°¡è¨Šè½‰ç™¼è‡³ç”±æ”»æ“Šè€…æ‰€æ§åˆ¶çš„æ‰‹æ©Ÿ
	- Simjackerå¼±é»ï¼šå®ƒæ˜¯åˆ©ç”¨äº†èˆŠå¼S@TæŠ€è¡“(2009å¹´)ï¼Œåªè¦å‘ç›®æ¨™çš„é›»è©±è™Ÿç¢¼ç™¼å‡ºåŒ…æ‹¬S@TæŒ‡ä»¤çš„SMSï¼Œæ¥æ”¶çš„æ‰‹æ©Ÿå°±æœƒä»¥SMSå›å‚³ä½ç½®è³‡è¨Šã€IMEI
		![[é§­å®¢å¯¦å‹™å…¥é–€_17_è¡Œå‹•å¹³å°å…¥ä¾µ_02_Simjackerå¼±é».png]]
- æ‡‰ç”¨ç¨‹å¼(Application)ï¼ŒEscalated Privileges(æ¬Šé™æå‡)
- ç³»çµ±(System)
- è³‡æ–™å„²å­˜/é›²ç«¯(DATA Center)
	- ç¶²è·¯ä¼ºæœå™¨(Web Server)ï¼šPlatform Vulnerabilities(å¹³å°å¼±é»)ã€Server Misconfiguration(ä¼ºæœå™¨è¨­å®šéŒ¯èª¤)
	- è³‡æ–™åº«(Database)ï¼šSQL Injectionã€OS command execution
- ç¶²è·¯(Network)ï¼šæ¥å…¥ä¸å—ä¿¡ä»»çš„ç¶²è·¯
	- Wi-Fi
	- Rogue AP
	- Packet Sniffing
	- Man-in-the Middle(MITM)
	- Session Hijacking
	- DNS Poisoning
	- SSL Strip (HTTPS é™ç´šæ”»æ“Š)
	- Fake SSL Certificates(å½é€ çš„SSLæ†‘è­‰)

## ğŸ—¡Android ç³»çµ±å…¥ä¾µæ–¹å¼ Android System Intrusion
### Androidæ¶æ§‹
![[é§­å®¢å¯¦å‹™å…¥é–€_17_è¡Œå‹•å¹³å°å…¥ä¾µ_03_Androidæ¶æ§‹.png]]

- SYSTEM APPS(ç³»çµ±é è¨­APP)ï¼Œé–‹ç™¼è€…èŒƒåœ
- JAVA API Framework(JAVA æ‡‰ç”¨ç¨‹å¼ä»‹é¢)ï¼Œé–‹ç™¼è€…èŒƒåœ
- Native C/C++ Libraries (å‡½å¼åº«)
- Android Runtime
- Hardware Abstraction Layer(ç¡¬é«”æŠ½è±¡å±¤)
- Linux Kernel

### Rooting
- Rootèƒ½å¤ å¹«åŠ©ä½¿ç”¨è€…è¶Šéæ‰‹æ©Ÿè£½é€ å•†çš„é™åˆ¶ï¼Œå¾—ä»¥è§£é™¤å®‰è£æœ¬èº«é è£çš„ç¨‹å¼ï¼Œæˆ–åŸ·è¡Œéœ€è¦ç³»çµ±æ¬Šé™çš„å‹•ä½œ
- Rooting å¯ä»¥è®“ä½¿ç”¨è€…æœ‰åŸ·è¡Œä»¥ä¸‹æ“ä½œ
	1. ç§»é™¤ç³»çµ±é è¨­ç¨‹å¼
	2. å­˜å–ç¡¬é«”çš„è¨­å®š
	3. æ”¹é€²æ•ˆèƒ½
	4. é™åˆ¶ç„¡ç·šç¶²è·¯å’Œè—èŠ½
	5. æƒ¡æ„è¡Œç‚ºï¼šé€ æˆæ‰‹æ©Ÿç„¡æ³•ä¿å›ºã€é™ä½æ•ˆèƒ½ã€è®Šæˆä¸€å¡Šç£šé ­

## ğŸ—¡IOSç³»çµ±å…¥ä¾µæ–¹å¼ IOS System Intrusion
### IOSæ¶æ§‹
- Cocoa Touchï¼šæä¾›åšAPPæœ€ä¸»è¦çš„åŠŸèƒ½ï¼Œå¦‚multitasking(èƒŒæ™¯åŸ·è¡Œ)ã€touch-based input(è§¸æ§è¼¸å…¥)â€¦
- Mediaï¼šå¤šåª’é«”åŠŸèƒ½ï¼Œ2D/3Dç¹ªåœ–ã€AudioæŠ€è¡“ã€æ’­æ”¾æˆ–éŒ„è£½å½±ç‰‡
- Core Servicesï¼šæ‰€æœ‰APPéœ€è¦çš„æ ¸å¿ƒåŠŸèƒ½
- Cors OSï¼šå¦‚æœéœ€è¦åšå®‰å…¨æ€§æˆ–èˆ‡å¤–éƒ¨ç¡¬é«”æºé€šï¼Œéœ€è¦ç›´æ¥ä½¿ç”¨é€™å±¤

### è¶Šç„ Jailbreaking
åœ¨IOSç³»çµ±ä¸Šæ¬Šé™å‡ç´šï¼Œåˆªé™¤æˆ–ç¹éå‡ºå» é è¨­é™åˆ¶

### è¶Šç„ç¨®é¡
- Userlandï¼šåœ¨ä½¿ç”¨è€…å±¤åŸ·è¡Œçš„APP
- iBootï¼šiBootæ˜¯iOSè¨­å‚™ä¸Šçš„å¼•å°åŠ è¼‰ç¨‹å¼ï¼Œç•¶iPhoneè™•æ–¼DFU(Development Firmware Upgrade)éŸŒé«”å‡ç´šæ¨¡å¼æ™‚ï¼ŒiBootæœƒé€²è¡Œæ¢å¾©å®ƒç¢ºä¿éŸŒé«”ç‰ˆæœ¬å¤§æ–¼æˆ–ç­‰æ–¼ç•¶å‰ç‰ˆæœ¬ã€‚å¦‚æœä¸æ˜¯ï¼ŒiBootå°‡ä¸å…è¨±é‚„åŸç¹¼çºŒé€²è¡Œ
- BootRomï¼šIOSç‚ºSecureROM ï¼Œæ˜¯ç„¡æ³•å¯«å…¥åªèƒ½å¤ è®€å–çš„é–‹æ©ŸROM

### æ”»æ“Šæ–¹å¼
- Userland Exploit : å…è¨±ä½¿ç”¨è€…æ¬Šé™(User-level)ç›´æ¥ä¿®æ”¹ã€å­˜å–ç³»çµ±é è¨­æ‡‰ç”¨ç¨‹å¼(System App)ï¼Œä¸ç”¨å‡ç´šæˆiBoot-levelå­˜å–
- iBoot Exploit : å…è¨±ä½¿ç”¨è€…æ¬Šé™(User-level)å’Œç¹éDFUæ¬Šé™æª¢æŸ¥(iboot-level)æ¬Šé™ï¼Œé€²è¡Œç‰ˆæœ¬å‡ç´šã€æˆ–é™ç´š
- ==Bootrom Exploit==ï¼šè‹¥æ‰‹æ©Ÿç‰ˆæœ¬ç‚ºIOS8ä»¥ä¸‹ï¼Œé€šä»¥é€šéæ™¶ç‰‡çš„æ¼æ´ç›´æ¥è¶Šç„ï¼›å®ƒå…è¨±ä½¿ç”¨è€…æ¬Šé™(User-level)å¯ä»¥ä¿®æ”¹ã€å­˜å–Bootromå€åŸŸ
- è¶Šç„å·¥å…·
	- Cydia
	- Pangu8
	- [checkm8](https://www.youtube.com/watch?v=DrntxWqDuvI)

### è¶Šç„æŠ€è¡“
- ä¸å—é™åˆ¶çš„è¶Šç„(Untethered Jailbreak)ï¼šä¸å—é™åˆ¶çš„è¶Šç„æ˜¯æŒ‡æ‰‹æ©Ÿåœ¨è¢«æ¬Šé™æå‡ï¼Œè‡ªè¡Œå®Œæˆå•Ÿå‹•ï¼Œä¸éœ€è¦å¦å¤–é€£æ¥é›»è…¦æˆ–æ˜¯å’Œè¶Šç„ç¨‹å¼å°æ‡‰çš„ç¨‹å¼
- éƒ¨åˆ†å—é™åˆ¶çš„è¶Šç„(Semi-Tethered Jailbreak)ï¼šéƒ¨åˆ†å—é™åˆ¶çš„è¶Šç„æ˜¯æ‰‹æ©Ÿåœ¨è¢«æ¬Šé™æå‡å¾Œï¼Œå®Œæˆå•Ÿå‹•ï¼Œä½†æ˜¯è¶Šç„ç¨‹å¼å°‡ç„¡æ³•å•Ÿå‹•ï¼Œå¿…é ˆå’Œé›»è…¦çš„è¶Šç„ç¨‹å¼ç¨‹å¼é€£ç·šå¾Œï¼Œæ‰èƒ½å®Œæˆè¶Šç„
- å—é™åˆ¶çš„è¶Šç„(Tethered Jailbreak)ï¼šå—é™åˆ¶çš„è¶Šç„æ˜¯å¿…é ˆå’Œé›»è…¦çš„è¶Šç„ç¨‹å¼ç¨‹å¼é€£ç·šå¾Œï¼Œæ‰èƒ½å®Œæˆè¶Šç„
- éƒ¨åˆ†ä¸å—é™åˆ¶çš„è¶Šç„(Semi-Untethered Jailbreak)ï¼šéƒ¨åˆ†ä¸å—é™åˆ¶çš„è¶Šç„æ˜¯å…è¨±æ‰‹æ©Ÿåœ¨è¢«æ¬Šé™æå‡å¾Œå¾Œå®Œæˆå•Ÿå‹•ï¼Œä½†æ˜¯è¶Šç„ç¨‹å¼å°‡ä¸æœƒå•Ÿå‹•ï¼Œå¿…é ˆæ˜¯è¨­å‚™ä¸Šæœ¬èº«å®‰è£äº†å’Œè¶Šç„ç¨‹å¼å°æ‡‰çš„ç¨‹å¼ï¼Œæ‰èƒ½å®Œæˆè¶Šç„

## ğŸ—¡è¡Œå‹•å¹³å°ç®¡ç† Mobile Platform Management
### è‡ªæ”œé›»å­è¨­å‚™ BYOD
è‡ªæ”œé›»å­è¨­å‚™(Bring Your Own Deviceï¼ŒBYOD)æ˜¯ä¸€ç¨®å…è¨±å“¡å·¥ä½¿ç”¨å€‹äººè¡Œå‹•è£ç½®é€²å…¥ä»–å€‘å·¥ä½œå€åŸŸä¸¦ç”¨ä»¥è™•ç†å…¬å¸è³‡è¨Šèˆ‡æ‡‰ç”¨ç¨‹å¼çš„ä½œæ¥­æ–¹å¼

- BYODé¢¨éšª
	1. åˆ†äº«æ©Ÿæ•è³‡è¨Šåˆ°ç¶²è·¯ä¸Š
	2. è³‡æ–™å¤–æ´©
	3. è¨­å‚™è™•ç†ä¸ç•¶
	4. æ··é›œå“¡å·¥å€‹äººè³‡æ–™
	5. è¨­å‚™é­ç«Š
	6. å“¡å·¥ç¼ºä¹è³‡å®‰æ„è­˜
	7. å¿ƒæ‡·ä¸æ»¿çš„å“¡å·¥
- BYODæ”¿ç­–
	1. å®šç¾©éœ€æ±‚
	2. é‡å°ä¸åŒå¹³å°å»ºç«‹ç®¡ç†æ”¿ç­–
	3. é–‹ç™¼æ”¿ç­–
	4. å®‰å…¨æ”¿ç­–
	5. æ”¯æ´æ”¿ç­–

### MDM
æ™ºæ…§å‹æ‰‹æ©Ÿè‡ªå‹•åŒ–ç®¡ç†ç³»çµ±(Mobile Device Managementï¼ŒMDM)ï¼šä¸»è¦ç”¨ä¾†ä½ˆç½²ã€ç¶­è­·å’Œç›£è¦–ç§»å‹•å¹³å°

- å¯é ç«¯é–å®šéºå¤±çš„è¨­å‚™
- å¯ä»¥é ç«¯æ¸…é™¤è¨­å‚™éºå¤±çš„è³‡æ–™(DLP)
- å¯ä»¥åµæ¸¬åœ¨MDMç®¡ç†ä¸‹è¢«è¶Šç„æ‰‹æ©Ÿ-->ä»£è¡¨MDMçš„ç¨‹å¼åœ¨ç›¸å°åº•å±¤çš„åœ°æ–¹åŸ·è¡Œ
- å°æ‰€æœ‰åœ¨MDMç›£ç®¡ä¸‹çš„è¨­å‚™å¯¦æ–½åš´æ ¼çš„å¯†ç¢¼æ”¿ç­–
- MDMå¯ä»¥åŠæ™‚ç›£è¦–è¨­å‚™å’Œç”¢å‡ºå ±å‘Š

#### MDMä½ˆç½²æ–¹å¼
- On-Site MDM Deploymentï¼Œæœ¬åœ°ç«¯ä½ˆç½²
	1. åœ¨æœ¬åœ°ç«¯ä¼ºæœå™¨ä¸Šå®‰è£MDMæ‡‰ç”¨ç¨‹å¼
	2. ç®¡ç†å·¥ä½œç”±æœ¬åœ°ç«¯å®Œæˆ
	3. æ“æœ‰MDM APP çš„å®Œå…¨æ§åˆ¶
- Cloud-Based MDM Deploymentï¼Œé›²ç«¯ä½ˆç½²
	1. MDMæ‡‰ç”¨ç¨‹å¼ç”±ç¬¬ä¸‰æ–¹å®‰è£å’Œç¶­è­·
	2. æ›´å°‘çš„ç®¡ç†
	3. éƒ¨ç½²å’Œç¶­è­·æ˜¯æœå‹™æä¾›å•†çš„è²¬ä»»

#### MDMç›¸é—œæ¼æ´åƒè€ƒ
- [Mobile Iron](https://youtu.be/hGTLIIOb14A)
- [Mobile Iron Log4shell](https://www.cybersecurity-help.cz/vdb/SB2021122108)

## ğŸ—¡è¡Œå‹•å¹³å°å®‰å…¨æ¸¬è©¦æŒ‡å— Mobile Platform Security Testing Guide
### åŸºæœ¬æ¸¬è©¦
- Mobile App Authentication Architecturesï¼ŒåŸºæœ¬ä¸Šæ˜¯OWASP APIçš„å¸¸è¦‹å¼±é»
- Testing Network Communicationï¼Œæ—©æœŸçš„APPåŠ å¯†æ™‚æœƒæŠŠkeyæ”¾åœ¨æ‰‹æ©Ÿæœ¬æ©Ÿä¸­ï¼Œç¾åœ¨å‰‡æœƒç”¨éå°ç¨±åŠ å¯†è§£æ±º
- Cryptography in Mobile Apps
- Testing Code Quality
- Tampering and Reverse Engineering
- Testing User Education

### AndroidåŸºæœ¬æ¸¬è©¦
- Setting up a Testing Environment for Android Appsï¼Œå»ºç«‹Androidæ¨¡æ“¬å™¨å¯åƒè€ƒï¼š[5 Best Android Emulators For Linux: Free & Paid For 2023](https://fossbytes.com/best-android-emulators-linux/)
- Data Storage on Android
- Android Cryptographic APIs
- Local Authentication on Android
- Android Network APIs
- Android Platform APIs
- Code Quality and Build Settings for Android Appsï¼Œå¯«æ­»å¯†ç¢¼
- Tampering and Reverse Engineering on Androidï¼Œå½å†’APPèˆ‡é ç«¯äº¤äº’
- Android Anti-Reversing Defensesï¼ŒAPPåŠ æ®¼

### IOSåŸºæœ¬æ¸¬è©¦
- Setting up a Testing Environment for iOS Apps
- Data Storage on iOS
- iOS Cryptographic APIs
- Local Authentication on iOS
- iOS Network APIs
- iOS Platform APIs
- Code Quality and Build Settings for iOS Apps
- Tampering and Reverse Engineering on iOS
- iOS Anti-Reversing Defenses

## ğŸ—¡è¡Œå‹•å¹³å°å®‰å…¨æ¸¬è©¦å·¥å…· Mobile Platform Security Testing Tool
### Androidé€†å‘&åˆ†æ
1. éœæ…‹åˆ†æ
	- Androguardï¼Œåç·¨è­¯çš„Pythonå·¥å…·
	- Android Backup Extractorï¼Œæå–Androidå‚™ä»½æª”
	- Android Debug Bridge(ADB)ï¼Œè¶Šç„æ¨¡æ“¬å™¨ï¼Œå®ƒå¾€å¾€åœ¨è£åœ¨é›»è…¦ä¸Šã€‚å¦‚æ‰‹æ©Ÿæ¥å±å¹•çš„APPä¹Ÿæ˜¯é€šéADBé–‹å•Ÿæ‰‹æ©Ÿä¸­çš„éƒ¨åˆ†è¨­å®š
	- apktoolï¼Œå¯ä»¥å°‡APKåçµ„å›åŸä¾†çš„æ¨£å­
	- android-classysharkï¼Œç”¨æ–¼æŸ¥çœ‹åç·¨è­¯çš„Javaç¨‹å¼
	- ByteCodeViewerï¼Œç”¨æ–¼æŸ¥çœ‹åç·¨è­¯çš„Javaç¨‹å¼
	- ClassNameDeobfuscatorï¼Œç”¨æ–¼æŸ¥çœ‹åç·¨è­¯çš„Javaç¨‹å¼
	- Jadx (Dex to Java Decompiler)
2. å‹•æ…‹åˆ†æ
	- Android Tcpdumpï¼Œç”¨æ–¼å´éŒ„TCPå°åŒ…
	- Drozerï¼Œæª¢æŸ¥æ‰‹æ©Ÿæ˜¯å¦æœ‰å¼±é»çš„APP
	- Inspeckage
	- Jdbï¼ŒLinux Debuggerï¼Œå¯æŸ¥çœ‹APPåº•å±¤çš„é‹ä½œåŸç†(æš«å­˜å€ã€è¨˜æ†¶é«”â€¦)
	- logcat-color
	- VirtualHookï¼Œå¯ä»¥ç¶å®šè¢«å‘¼å«çš„Java APIï¼Œç”¨æ–¼æŸ¥çœ‹æ•´å€‹ç¨‹å¼çš„ç‹€æ…‹
	- Xposed Framework

### IOSé€†å‘&åˆ†æ
1. éœæ…‹åˆ†æ
	- class-dumpï¼Œè§£ædump Objective-C library
	- Clutchï¼Œå®ƒå¯ç”¨æ–¼å˜—è©¦è§£å¯†å·²åŠ å¯†çš„APP
	- Dumpdecrypted
	- hopperscripts
	- otool
	- Plutil
	- Weak Classdump
2. å‹•æ…‹åˆ†æ
	- bfinject
	- BinaryCookieReader
	- Burp Suite Mobile Assistantï¼Œæ””æˆªHttpå°åŒ…
	- Cycript
	- ==Frida-cycript==ï¼ŒIOS APP Debugger
	- keychaindumper
